{"version":3,"names":["CountDownClass","constructor","timer","setDefaultTimerCallback","floorDuration","duration","Math","floor","startTimer","that","interval","setInterval","handleOnTimerChange","clearInterval","handleOnTimerEnd","onTimerEnd","length","forEach","callback","onTimerChange","setTimer","getTimer","push","getTimerOnEnd","resetTimer","CountDown"],"sources":["CountDown.ts"],"sourcesContent":["class CountDownClass {\n  timer: number;\n  interval?: ReturnType<typeof setInterval>;\n  onTimerEnd?: { (): void }[];\n  onTimerChange?: { (timer: number): void }[];\n  constructor() {\n    this.timer = 0;\n    this.setDefaultTimerCallback();\n  }\n\n  private floorDuration(duration: number) {\n    return duration >= 0 ? Math.floor(duration * 0.001) * 1000 : 0;\n  }\n\n  private startTimer() {\n    const that = this;\n\n    this.interval = setInterval(function () {\n      that.handleOnTimerChange(that.timer);\n      if (that.timer <= 0) {\n        that.clearInterval();\n        that.handleOnTimerEnd();\n      } else {\n        that.timer -= 1000;\n      }\n    }, 1000);\n  }\n\n  private clearInterval() {\n    this.interval && clearInterval(this.interval);\n  }\n\n  private handleOnTimerEnd() {\n    this.onTimerEnd?.length !== 0 &&\n      this.onTimerEnd?.forEach((callback) => callback());\n    this.setDefaultTimerCallback();\n  }\n\n  private handleOnTimerChange(timer: number) {\n    this.onTimerChange?.length !== 0 &&\n      this.onTimerChange?.forEach((callback) => callback(timer));\n  }\n\n  private setDefaultTimerCallback() {\n    this.onTimerEnd = [];\n    this.onTimerChange = [];\n  }\n\n  setTimer(duration: number) {\n    this.clearInterval();\n    this.timer = this.floorDuration(duration);\n    this.startTimer();\n  }\n\n  getTimer(onTimerChange: (timer: number) => void) {\n    this.onTimerChange?.push(onTimerChange);\n  }\n\n  getTimerOnEnd(onTimerEnd: () => void) {\n    this.onTimerEnd?.push(onTimerEnd);\n  }\n\n  resetTimer() {\n    this.clearInterval();\n    this.setDefaultTimerCallback();\n    this.timer = 0;\n  }\n}\n\nexport const CountDown = new CountDownClass();\n"],"mappings":";;;;;;;;;AAAA,MAAMA,cAAN,CAAqB;EAKnBC,WAAW,GAAG;IAAA;;IAAA;;IAAA;;IAAA;;IACZ,KAAKC,KAAL,GAAa,CAAb;IACA,KAAKC,uBAAL;EACD;;EAEOC,aAAa,CAACC,QAAD,EAAmB;IACtC,OAAOA,QAAQ,IAAI,CAAZ,GAAgBC,IAAI,CAACC,KAAL,CAAWF,QAAQ,GAAG,KAAtB,IAA+B,IAA/C,GAAsD,CAA7D;EACD;;EAEOG,UAAU,GAAG;IACnB,MAAMC,IAAI,GAAG,IAAb;IAEA,KAAKC,QAAL,GAAgBC,WAAW,CAAC,YAAY;MACtCF,IAAI,CAACG,mBAAL,CAAyBH,IAAI,CAACP,KAA9B;;MACA,IAAIO,IAAI,CAACP,KAAL,IAAc,CAAlB,EAAqB;QACnBO,IAAI,CAACI,aAAL;QACAJ,IAAI,CAACK,gBAAL;MACD,CAHD,MAGO;QACLL,IAAI,CAACP,KAAL,IAAc,IAAd;MACD;IACF,CAR0B,EAQxB,IARwB,CAA3B;EASD;;EAEOW,aAAa,GAAG;IACtB,KAAKH,QAAL,IAAiBG,aAAa,CAAC,KAAKH,QAAN,CAA9B;EACD;;EAEOI,gBAAgB,GAAG;IAAA;;IACzB,0BAAKC,UAAL,sEAAiBC,MAAjB,MAA4B,CAA5B,0BACE,KAAKD,UADP,sDACE,kBAAiBE,OAAjB,CAA0BC,QAAD,IAAcA,QAAQ,EAA/C,CADF;IAEA,KAAKf,uBAAL;EACD;;EAEOS,mBAAmB,CAACV,KAAD,EAAgB;IAAA;;IACzC,6BAAKiB,aAAL,4EAAoBH,MAApB,MAA+B,CAA/B,6BACE,KAAKG,aADP,yDACE,qBAAoBF,OAApB,CAA6BC,QAAD,IAAcA,QAAQ,CAAChB,KAAD,CAAlD,CADF;EAED;;EAEOC,uBAAuB,GAAG;IAChC,KAAKY,UAAL,GAAkB,EAAlB;IACA,KAAKI,aAAL,GAAqB,EAArB;EACD;;EAEDC,QAAQ,CAACf,QAAD,EAAmB;IACzB,KAAKQ,aAAL;IACA,KAAKX,KAAL,GAAa,KAAKE,aAAL,CAAmBC,QAAnB,CAAb;IACA,KAAKG,UAAL;EACD;;EAEDa,QAAQ,CAACF,aAAD,EAAyC;IAAA;;IAC/C,6BAAKA,aAAL,8EAAoBG,IAApB,CAAyBH,aAAzB;EACD;;EAEDI,aAAa,CAACR,UAAD,EAAyB;IAAA;;IACpC,0BAAKA,UAAL,wEAAiBO,IAAjB,CAAsBP,UAAtB;EACD;;EAEDS,UAAU,GAAG;IACX,KAAKX,aAAL;IACA,KAAKV,uBAAL;IACA,KAAKD,KAAL,GAAa,CAAb;EACD;;AAlEkB;;AAqEd,MAAMuB,SAAS,GAAG,IAAIzB,cAAJ,EAAlB"}